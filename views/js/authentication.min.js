function signUpWithEmailVerification(){handleSignUp()}function signIn(){toggleSignIn()}function toggleSignIn(){var e=document.getElementById("email").value,a=document.getElementById("password").value;e.length<4?alert("Please enter an email address."):a.length<4?alert("Please enter a password."):firebase.auth().signInWithEmailAndPassword(e,a).then(function(){loginToApp()}).catch(function(e){var a=e.code,n=e.message;console.log(e),"auth/wrong-password"===a?alert("Wrong password."):alert(n)})}function handleSignUp(){var e=document.getElementById("email").value,a=document.getElementById("password").value;console.log(e,a),e.length<4?alert("Please enter an email address."):a.length<4?alert("Please enter a password."):firebase.auth().createUserWithEmailAndPassword(e,a).then(function(){initApp()}).catch(function(e){var a=e.code,n=e.message;a&&(response=a),console.log(e),"auth/weak-password"==a?alert("The password is too weak."):alert(n)})}function sendPasswordReset(){var e=document.getElementById("email").value;firebase.auth().sendPasswordResetEmail(e).then(function(){alert("Password Reset Email Sent!")}).catch(function(e){var a=e.code,n=e.message;"auth/invalid-email"==a?alert(n):"auth/user-not-found"==a&&alert(n),console.log(e)})}function initApp(){firebase.auth().onAuthStateChanged(function(e){if(e){var a=e.emailVerified;console.log("Email Status",a),a?alert("Your email is already verified!Please login with the email"):(currentUser=e,firebase.auth().currentUser.sendEmailVerification().then(function(){console.log(currentUser),firebase.auth().currentUser.getIdToken(!0).then(function(e){var a;a=e,$.ajax({url:"validateToken",type:"POST",data:{idToken:a,restaurantName:$("#restaurantname").val(),tableCount:$("#noftables").val(),firstname:$("#firstname").val(),lastname:$("#lastname").val()},success:function(e){console.log(e),"success"==e?window.location.href="/login":alert("Issue while validating Token")},error:function(e){alert(e)}}),console.log(e)}).catch(function(e){var a=e.code,n=e.message;console.log(a,n)})}).catch(function(e){firebase.auth().currentUser.delete().then(function(){console.log("deleted")}).catch(function(e){console.log("user not found")})}))}else alert("Email is not exist!Please use Valid Email")})}function loginToApp(){firebase.auth().onAuthStateChanged(function(e){if(e){var a=e.emailVerified;console.log("Email Status",a),a?(currentUser=e,firebase.auth().currentUser.getIdToken(!0).then(function(e){$("div.main-login").append('<input name="idToken" id="idToken" value='+e+' type="hidden"/>'),console.log(e),addSubmitForm()}).catch(function(e){var a=e.code,n=e.message;console.log(a,n)})):alert("Email is not verified!Please verify your email")}else alert("Email is not Exist!Please use Valid Email")})}function addSubmitForm(){$("div.main-login").wrap('<form id="loginForm" name="loginForm">');var e=$("#loginForm").get(0);e.action="login",e.method="POST",e.submit()}$(document).ready(function(){firebase.initializeApp({apiKey:"AIzaSyDqdpDVJ5cnTMcn0N_Jq4XXWYLpqVXEQJY",authDomain:"test-6d54b.firebaseapp.com",databaseURL:"https://test-6d54b.firebaseio.com",projectId:"test-6d54b",storageBucket:"test-6d54b.appspot.com",messagingSenderId:"27004136578"})});